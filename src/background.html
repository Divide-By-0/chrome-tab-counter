<html>
<head>
	<title>Chrome Tab Counter background</title>
	<script type="text/javascript" src="prototype.js"></script>
	<script type="text/javascript" src="scripts.js"></script>
	<!--<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/scriptaculous/1.8.1/scriptaculous.js?load=effects"></script>-->

<script>

function init() {

	localStorage.setItem("tabsTotal");
	localStorage.tabsTotal = 0;
	
	chrome.tabs.onCreated.addListener(function(tab) {
		incrementTabCount();
	});

	updateTabCount();
}

function incrementTabCount() {
	localStorage.tabsTotal++;
	updateTabCount();
}

function updateTabCount() {
	chrome.browserAction.setBadgeText({text: localStorage.tabsTotal});
	chrome.browserAction.setBadgeBackgroundColor({ "color": [89, 65, 0, 255] });
}

</script>
</head>

<body onload="init()">
</body>
</html>
